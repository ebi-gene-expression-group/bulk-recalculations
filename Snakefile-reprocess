include: "Snakefile"
  
# atom: set grammar=python:

# This script used to rerun studies that have new matrices generated from IRAP/ISL

def get_outputs():
    """
    First method to be executed since it is run by rule all.
    """
    import os.path
    import datetime
    print('Starting getting list of outputs..' + str(datetime.datetime.now()))

    outputs = []
    # collect output for reprocessing
    outputs.extend(expand("logs/"+f"{config['accession']}-check_configuration_xml.done" ))

    if config['tool']=="all-baseline" or 'baseline-tracks' in config['tool'] or 'baseline-heatmap' in config['tool'] or 'baseline-coexpression' in config['tool']:
        outputs.extend(expand("logs/"+f"{config['accession']}-check_factors_xml.done" ))

    # differential rna-seq
    # if
    #differential microarrays
    # if

    print(outputs)
    print('Getting list of outputs.. done')
    print(datetime.datetime.now())

    return outputs


rule all:
    input:
        required_outputs=get_outputs()

